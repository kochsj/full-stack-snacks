{"ast":null,"code":"var _jsxFileName = \"/Users/stephen/codefellows/401/labs/lab42/full-stack-snacks/full_stack_snacks/pages/App.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport axios from 'axios';\nimport LoginForm from './components/LoginForm';\nimport './App.css';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from \"react-router-dom\";\nimport SnackDetail from './components/snackDetail';\nimport SnackList from './components/snackList';\nimport SnackForm from './components/snackForm';\nconst url = 'http://167.172.203.221:8000/api/';\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      accessToken: '',\n      refreshToken: '',\n      snacks: null // snacks: [\n      //   {id: 1234, name: \"abcd\", desc: \"yaya\"},\n      //   {id: 5678, name: \"efgh\", desc: \"nana\"},\n      // ]      \n\n    };\n    this.renderSnackDetail = this.renderSnackDetail.bind(this);\n    this.formHandler = this.formHandler.bind(this);\n    this.deleteHandler = this.deleteHandler.bind(this);\n    this.updateHandler = this.updateHandler.bind(this);\n    this.loginHandler = this.loginHandler.bind(this);\n  }\n\n  async loginHandler({\n    access,\n    refresh\n  }) {\n    this.setState({\n      accessToken: access,\n      refreshToken: refresh\n    });\n\n    try {\n      const headers = {\n        headers: {\n          Authorization: `Bearer ${this.state.accessToken}`\n        }\n      };\n      const response = await axios.get(url + 'v1/', headers);\n      console.log(response.data);\n      this.setState({\n        snacks: response.data\n      });\n    } catch (error) {\n      console.error('ruhroh');\n    }\n  }\n\n  renderSnackDetail(props) {\n    if (!this.state.accessToken) {\n      return __jsx(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      });\n    }\n\n    const snackId = parseInt(props.match.params.id);\n    const snack = this.state.snacks && this.state.snacks.find(snack => snack.id === snackId);\n    console.log('trying to render {snack}: ', snack);\n\n    if (snack) {\n      return __jsx(SnackDetail, {\n        snack: snack,\n        doneHandler: this.updateHandler,\n        deleteHandler: this.deleteHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      });\n    } else {\n      return __jsx(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      });\n    }\n  }\n\n  async formHandler(snack) {\n    let newSnack = snack;\n    let newList = this.state.snacks;\n    newList.push(newSnack);\n    this.setState({\n      snacks: newList\n    });\n  }\n\n  async updateHandler(snack) {\n    console.log('input update: ', snack);\n    this.setState({\n      snacks: this.state.snacks.map(snk => {\n        if (snk.id === snack.id) {\n          return snack;\n        } else {\n          return snk;\n        }\n      })\n    });\n  }\n\n  async deleteHandler(event) {\n    let snackToDelete = event.target.value;\n    console.log('should be id: ', snackToDelete);\n    const lst = this.state.snacks.filter(snack => snack.id !== Number(snackToDelete));\n    this.setState({\n      snacks: lst\n    });\n  }\n\n  render() {\n    return __jsx(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, __jsx(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Hello World\"), __jsx(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, __jsx(Route, {\n      exact: true,\n      path: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, this.state.snacks ? __jsx(SnackList, {\n      snacks: this.state.snacks,\n      doneHandler: this.formHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }) : __jsx(LoginForm, {\n      onSuccess: this.loginHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    })), __jsx(Route, {\n      path: \"/:id\",\n      render: this.renderSnackDetail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/stephen/codefellows/401/labs/lab42/full-stack-snacks/full_stack_snacks/pages/App.js"],"names":["React","axios","LoginForm","BrowserRouter","Router","Switch","Route","Redirect","SnackDetail","SnackList","SnackForm","url","App","Component","constructor","props","state","accessToken","refreshToken","snacks","renderSnackDetail","bind","formHandler","deleteHandler","updateHandler","loginHandler","access","refresh","setState","headers","Authorization","response","get","console","log","data","error","snackId","parseInt","match","params","id","snack","find","newSnack","newList","push","map","snk","event","snackToDelete","target","value","lst","filter","Number","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport LoginForm from './components/LoginForm'\nimport './App.css';\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\n\nimport SnackDetail from './components/snackDetail';\nimport SnackList from './components/snackList';\nimport SnackForm from './components/snackForm';\n\nconst url = 'http://167.172.203.221:8000/api/';\n\nexport default class App extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      accessToken: '',\n      refreshToken: '',\n      snacks: null,\n      // snacks: [\n      //   {id: 1234, name: \"abcd\", desc: \"yaya\"},\n      //   {id: 5678, name: \"efgh\", desc: \"nana\"},\n      // ]      \n    }\n    this.renderSnackDetail = this.renderSnackDetail.bind(this)\n    this.formHandler = this.formHandler.bind(this)\n    this.deleteHandler = this.deleteHandler.bind(this)\n    this.updateHandler = this.updateHandler.bind(this)\n    this.loginHandler = this.loginHandler.bind(this)\n\n  }\n\n  async loginHandler({access, refresh}) {\n    this.setState({\n        accessToken : access,\n        refreshToken : refresh,\n    });\n\n    try {\n        const headers = {\n            headers: {\n                Authorization: `Bearer ${this.state.accessToken}`\n            }\n        }\n        const response = await axios.get(url + 'v1/', headers);\n\n        console.log(response.data);\n\n        this.setState({\n            snacks: response.data\n        });\n\n    } catch (error) {\n        console.error('ruhroh');\n    }\n\n}\n\n  renderSnackDetail(props){\n    if (!this.state.accessToken) {\n      return <Redirect to=\"/\" />\n    }\n    const snackId = parseInt(props.match.params.id);\n    const snack = this.state.snacks && this.state.snacks.find(snack => snack.id === snackId);\n    console.log('trying to render {snack}: ', snack)\n    if(snack){\n      return <SnackDetail snack={snack} doneHandler={this.updateHandler} deleteHandler={this.deleteHandler}/>\n    } else{\n      return <Redirect to=\"/\" />\n    }\n  }\n\n  async formHandler(snack){\n    let newSnack = snack\n    let newList = this.state.snacks\n    newList.push(newSnack)\n\n    this.setState({\n      snacks : newList\n    })\n  }\n\n  async updateHandler(snack){\n    console.log('input update: ', snack)\n    this.setState({\n      snacks : this.state.snacks.map(snk => {\n        if(snk.id === snack.id){\n          return snack;\n        }else{\n          return snk;\n        }\n      })\n    })\n  }\n\n  async deleteHandler(event){\n    let snackToDelete = event.target.value\n    console.log('should be id: ', snackToDelete)\n    const lst = this.state.snacks.filter(snack => snack.id !== Number(snackToDelete))\n    this.setState({\n      snacks : lst,\n    })\n  }\n\n  render(){\n    return(\n      <Router>\n        <h1>Hello World</h1>\n        <Switch>\n          <Route exact path=\"/\">\n            {this.state.snacks ? <SnackList snacks={this.state.snacks} doneHandler={this.formHandler}/> : <LoginForm onSuccess={this.loginHandler} />}\n          </Route>\n\n          <Route path=\"/:id\" render={this.renderSnackDetail} />\n\n        </Switch>\n      </Router>\n    )\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}